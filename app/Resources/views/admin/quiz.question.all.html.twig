{# src/Resources/views/admin/q.tag.html.twig #} 
{% extends 'admin/init.html.twig' %} 

{% if form is defined %}
	{% form_theme form _self %}
	{% block choice_widget_expanded %}
    	{% spaceless %}
    	    <tr {{ block('widget_container_attributes') }}>
        	    {% for child in form %}
        	    	<td style="width:10px">
        	        	{{ form_widget(child) }}
        	        </td> 
        	        <td style="width:250px">
        	        	{{ form_label(child) }}
        	        </td> 
        	    {% endfor %}
    	    </tr>
    	{% endspaceless %}
	{% endblock choice_widget_expanded %} 

{% endif %}

{% block body %}
	<div id="" class="container">

		<div id="panel" class="panel panel-default">
			<div class="panel-heading">
            	<h3 class="panel-title">Da ist die ganze Liste von allen Frage, welche noch nicht zu Quiz zugewiesen</h3>
            </div>
            <div class="panel-heading">
            	<h4 class="panel-title"><span>Quizname: </span><small>{{ quiz.title }}</small> </h4>
            </div>
			<div class="panel-body">
				<div class="panel-scroll">
    				<table class="table table-bordered" fixed-header>
    					<thead>
                            <tr>
                            	<th style="width:10px">#</th>
                                <th style="width:250px">Titel</th>
                                <th style="width:50px">Antwort-1</th>
                                <th style="width:50px">Antwort-2</th>
                                <th style="width:50px">Antwort-3</th>
                                <th style="width:50px">Antwort-4</th>
                                <th style="width:50px">Antwort-5</th>
                                <th style="width:50px">Antwort-6</th>
                                <th style="width:50px">Antwort-7</th>
                                <th style="width:50px">Antwort-8</th>
                            </tr>
                        </thead>
                        {% for e in questions %}
                        	<tr>
                        		<td style="width:10px">
                        			<input type="checkbox" value="{{ e.id }}" id="q-{{ e.id }}"></input>
                        		</td>
                        		<td style="width:250px">
                        			{{ e.title }}
                        		</td>
                        		{% for a in e.answers %}
                            		<td style="width:50px">
                            			{{ a.title }}	
                            		</td>
                        		{% endfor %}
                        		{% if e.answers|length < 5 %}
                        			<td style="width:50px">-</td>
                        			<td style="width:50px">-</td>
                        			<td style="width:50px">-</td>
                        			<td style="width:50px">-</td>
                        		{% elseif e.answers|length < 6 %}
                        			<td style="width:50px">-</td>
                        			<td style="width:50px">-</td>
                        			<td style="width:50px">-</td>
                        		{% elseif e.answers|length < 7 %}
                        			<td style="width:50px">-</td>
                        			<td style="width:50px">-</td>
                        		{% elseif e.answers|length < 8 %}
                        			<td style="width:50px">-</td>
                        	    {% endif %}
                    		</tr>
                    	{% endfor %}
    				</table>
            	</div>
            	
            	<br/>
            	
            	
            	
    		 	<form action="{{ path('admin_quizquestione',{'eid':quiz.id}) }}" method="post" id="f-admin-quizquestion" data-toggle="validator" role="form">
                	
            		<h3>Da kannst eine Quiz bearbeiten und speichern</h3>
            		<br/>
            		<div class="form-group">
        				{{ dump(form.vars) }}
        			</div>
        			
        			
        			<div class="panel-scroll">
        				<table class="table table-bordered" fixed-header>
        					<thead>
                                <tr>
                                	<th style="width:10px">#</th>
                                    <th style="width:250px">Titel</th>
                                    <th style="width:50px">Antwort-1</th>
                                    <th style="width:50px">Antwort-2</th>
                                    <th style="width:50px">Antwort-3</th>
                                    <th style="width:50px">Antwort-4</th>
                                    <th style="width:50px">Antwort-5</th>
                                    <th style="width:50px">Antwort-6</th>
                                    <th style="width:50px">Antwort-7</th>
                                    <th style="width:50px">Antwort-8</th>
                                </tr>
                            </thead>
                            {{ form_widget(form.questions) }}
        				</table>
                	</div>
        			
        			
        			
            		<div style="display: none">
                	    {{ form_rest(form) }}
                	</div>
            		<div class="f-admin">
            			<button class="btn btn-primary btn-lg" type="submit">Speichern</button>
            		</div>
                </form>
			</div>
		</div>
		<script type="text/javascript">
    		//select checkboxes with image-names of all users which are not in the list from database 
    		$( "#form_fns input" ).each(function(i) {
    			var fn_left =  $(this).val().replace(/\-big.*/,'');
    			fn_left = fn_left.replace(/\-sm.*/,'');
    			fn_left = fn_left.replace(/\-or.*/,'');
    			//$(this).val().substr($(this).val().indexOf('-big') + '-big'.length);
    			if ($("#form_fndbs input[value^='" + fn_left + "']").length ) {
    				$(this).attr('checked', false);
    				$(this).attr('disabled', true);
    				$(this).next().css('color', 'red');
    				  
    				$(this).next().next().attr('checked', false);
    				$(this).next().next().attr('disabled', true);
    				$(this).next().next().next().css('color', 'red');
    	
    				$(this).next().next().next().next().attr('checked', false);
    				$(this).next().next().next().next().attr('disabled', true);
    				$(this).next().next().next().next().next().next().css('color', 'red');
    			}else{
    				$(this).attr('checked', true); 
    				$(this).next().css('color', 'grey'); 
    			}
    		 });
		</script>
		
	</div>
{% endblock %} 